(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(16),u=t.n(c),r=t(3),o=t(2),a=t(0),i=function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("p",{children:["Search for name: ","  ",Object(a.jsx)("input",{value:e.value,onChange:e.function})]})})},s=function(e){var n=e.name,t=e.number,c=e.deletion;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("p",{children:[n,": ",t," ",Object(a.jsx)("button",{value:n,onClick:c,children:"Delete"})]})})},l=function(e){var n=e.persons.map((function(n){if(n.name.toLowerCase().indexOf(e.searchName.toLowerCase())>-1)return n})).filter((function(e){return void 0!==e})).map((function(n){return Object(a.jsx)(s,{name:n.name,number:n.number,deletion:e.deletion},n.name)}));return Object(a.jsx)(a.Fragment,{children:n})},f=function(e){return Object(a.jsxs)("form",{onSubmit:e.submission,children:[Object(a.jsxs)("div",{children:["name: ",Object(a.jsx)("input",{value:e.namefield,onChange:e.nameinput})]}),Object(a.jsxs)("div",{children:["number: ",Object(a.jsx)("input",{value:e.numberfield,onChange:e.numberinput})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"add"})})]})},d=t(4),j=t.n(d),b="/api/persons",m=function(){return j.a.get(b).then((function(e){return e.data}))},h=function(e){return j.a.post(b,e).then((function(e){return e.data}))},O=function(e){return j.a.delete("".concat(b,"/").concat(e)).then(console.log("Entry deleted"))},p=function(e,n){return j.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},x=function(e){var n=e.message,t=e.error;return null===n&&null===t?null:null===n?Object(a.jsx)("div",{className:"error",children:t}):Object(a.jsx)("div",{className:"message",children:n})},v=function(){var e=Object(o.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],u=Object(o.useState)(""),s=Object(r.a)(u,2),d=s[0],j=s[1],b=Object(o.useState)(""),v=Object(r.a)(b,2),g=v[0],y=v[1],w=Object(o.useState)(""),k=Object(r.a)(w,2),S=k[0],C=k[1],T=Object(o.useState)(null),N=Object(r.a)(T,2),P=N[0],D=N[1],E=Object(o.useState)(null),F=Object(r.a)(E,2),A=F[0],J=F[1],L=function(e){return t.find((function(n){return n.name===e})).id};Object(o.useEffect)((function(){m().then((function(e){c(e)}))}),[]);return Object(a.jsxs)("div",{children:[Object(a.jsx)(x,{message:P,error:A}),Object(a.jsx)("h2",{children:"Phonebook"}),Object(a.jsx)(i,{value:S,function:function(e){C(e.target.value)}}),Object(a.jsx)("h2",{children:"Add a new contact"}),Object(a.jsx)(f,{namefield:d,nameinput:function(e){j(e.target.value)},numberfield:g,numberinput:function(e){y(e.target.value)},submission:function(e){e.preventDefault();var n={name:d,number:g};t.every((function(e){return e.name!==d}))?h(n).then((function(e){c(t.concat(e))})).then((function(){D("".concat(d," sucessfully added"))})).then((function(){return setTimeout((function(){D(null)}),5e3)})).catch((function(e){J(e.response.data.error),setTimeout((function(){J(null)}),5e3),c(t)})):window.confirm("".concat(d," is already in the Phonebook. Would you like to update their number?"))?p(L(n.name),n).then((function(e){c(t.map((function(n){return n.name!==e.name?n:e})))})).then((function(){D("".concat(n.name," sucessfully updated"))})).then((function(){setTimeout((function(){D(null)}),5e3)})).catch((function(e){e.response.data.error?J(e.response.data.error):(J("Name already deleted from Phonebook"),c(t.filter((function(e){return e.name!==d})))),setTimeout((function(){J(null)}),5e3)})):alert("Cancelled update"),j(""),y("")}}),Object(a.jsx)("h2",{children:"Numbers"}),Object(a.jsx)(l,{persons:t,searchName:S,deletion:function(e){var n=e.currentTarget.value,u=L(n);window.confirm("Are you sure you want to delete ".concat(n," from your contacts?"))?O(u).then((function(){c(t.filter((function(e){return e.id!==u})))})).then((function(){D("".concat(n," sucessfully deleted"))})).then((function(){return setTimeout((function(){D(null)}),5e3)})).catch((function(e){J("Person not found"),setTimeout((function(){J(null)}),5e3),c(t.filter((function(e){return e.id!==u})))})):alert("Deletion cancelled")}})]})};t(40);u.a.render(Object(a.jsx)(v,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.19bdd7fa.chunk.js.map